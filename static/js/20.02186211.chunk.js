(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[20],{119:function(t,e,i){"use strict";i.r(e);var n=i(3),r=i(0),c=i.n(r),s=i(17);function a(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:"x"in e?e.x:e.top,left:"y"in e?e.y:e.left,x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top,right:e.right,bottom:e.bottom}}var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.liveMeasure,i=void 0===e||e,n=Object(r.useState)({}),c=n[0],s=n[1],o=Object(r.useState)(null),l=o[0],h=o[1],u=Object(r.useCallback)((function(t){h(t)}),[]);return Object(r.useLayoutEffect)((function(){if(l){var t=function(){return window.requestAnimationFrame((function(){return s(a(l))}))};if(t(),i)return window.addEventListener("resize",t),window.addEventListener("scroll",t),function(){window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}}}),[l]),[u,c,l]},l=i(31),h=function(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}},u=function(t,e){var i=t.velocity.x-e.velocity.x,n=t.velocity.y-e.velocity.y;if(i*(e.x-t.x)+n*(e.y-t.y)>=0){var r=-Math.atan2(e.y-t.y,e.x-t.x),c=t.mass,s=e.mass,a=h(t.velocity,r),o=h(e.velocity,r),l={x:a.x*(c-s)/(c+s)+2*o.x*s/(c+s),y:a.y},u={x:o.x*(c-s)/(c+s)+2*a.x*s/(c+s),y:o.y},f=h(l,-r),y=h(u,-r);t.velocity.x=f.x,t.velocity.y=f.y,e.velocity.x=y.x,e.velocity.y=y.y}};e.default=function(){var t=o(),e=Object(n.a)(t,2),i=e[0],a=e[1],h=a.width,f=a.height,y=Object(r.useContext)(s.b).dark,v=Object(r.useRef)(null),x=Object(r.useRef)(null),d=Object(r.useRef)(),g=[],b={sick:y?"RGBA(245, 190, 28, 1.00)":"RGBA(226, 80, 59, 1.00)",well:"gray",foreground:y?"RGBA(255, 255, 255, 1.00)":"RGBA(26, 27, 30, 1.00)",background:y?"":"RGBA(228, 230, 234, 0.7)"};function w(t,e,i,n){this.x=t,this.y=e,this.velocity={x:2*(Math.random()-.5),y:2*(Math.random()-.5)},this.radius=i,this.mass=1,this.state=n,this.color="gray",this.draw=function(t){t.beginPath(t),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=b[this.state],t.fill(),t.closePath()},this.update=function(t,e){this.draw(t);for(var n=0;n<e.length;n++)this!==e[n]&&Object(l.c)(this.x,this.y,e[n].x,e[n].y)-2*i<0&&(u(this,e[n]),"sick"!==this.state&&"sick"!==e[n].state||(this.state="sick",e[n].state="sick"));(this.x-this.radius<=0||this.x+this.radius>=h)&&(this.velocity.x=-this.velocity.x),(this.y-this.radius<=0||this.y+this.radius>=f)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y}}Object(r.useEffect)((function(){return d.current=requestAnimationFrame(p),function(){return cancelAnimationFrame(d.current)}}));for(var m=0;m<200;m++){var j=Object(l.f)(6,h-6),O=Object(l.f)(6,f-6);if(g.length>=1)for(var k=0;k<g.length;k++)Object(l.c)(j,O,g[k].x,g[k].y)-12<0&&(j=Object(l.f)(6,h-6),O=Object(l.f)(6,f-6));g.push(new w(0===m?h/2:j,0===m?f/2:O,6,0===m?"sick":"well"))}var p=function t(){var e=v.current.getContext("2d"),i=x.current.getContext("2d");e.clearRect(0,0,h,f),i.clearRect(0,0,h,100),g.forEach((function(t){return t.update(e,g)}));var n=g.filter((function(t){return"sick"===t.state})).length,r=200-n;i.font="20px Inter",i.fillStyle="white",i.textAlign="left",i.beginPath(e),i.arc(35,42,8,0,2*Math.PI),i.fillStyle=b.sick,i.fill(),e.restore(),i.fillStyle=b.foreground,i.beginPath(e),i.arc(35,73,8,0,2*Math.PI),i.fillStyle=b.well,i.fill(),e.restore(),i.fillStyle=b.foreground,i.fillText("Sick: ".concat(n),55,50),i.fillText("Well: ".concat(r),55,80),d.current=requestAnimationFrame(t)};return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement("div",{ref:i,style:{width:"100%",height:"60vh",borderBottom:"1px solid ".concat(b.foreground)}},c.a.createElement("canvas",{ref:v,width:h,height:f}),c.a.createElement("canvas",{ref:x,width:h,height:"150px"})))}}}]);
//# sourceMappingURL=20.02186211.chunk.js.map