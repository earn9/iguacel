(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[19],{119:function(t,e,i){"use strict";i.r(e);var n=i(3),r=i(0),c=i.n(r),a=i(18);function s(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:"x"in e?e.x:e.top,left:"y"in e?e.y:e.left,x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top,right:e.right,bottom:e.bottom}}var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.liveMeasure,i=void 0===e||e,n=Object(r.useState)({}),c=n[0],a=n[1],o=Object(r.useState)(null),l=o[0],h=o[1],u=Object(r.useCallback)((function(t){h(t)}),[]);return Object(r.useLayoutEffect)((function(){if(l){var t=function(){return window.requestAnimationFrame((function(){return a(s(l))}))};if(t(),i)return window.addEventListener("resize",t),window.addEventListener("scroll",t),function(){window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}}}),[l]),[u,c,l]},l=i(22),h=function(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}},u=function(t,e){var i=t.velocity.x-e.velocity.x,n=t.velocity.y-e.velocity.y;if(i*(e.x-t.x)+n*(e.y-t.y)>=0){var r=-Math.atan2(e.y-t.y,e.x-t.x),c=t.mass,a=e.mass,s=h(t.velocity,r),o=h(e.velocity,r),l={x:s.x*(c-a)/(c+a)+2*o.x*a/(c+a),y:s.y},u={x:o.x*(c-a)/(c+a)+2*s.x*a/(c+a),y:o.y},y=h(l,-r),f=h(u,-r);t.velocity.x=y.x,t.velocity.y=y.y,e.velocity.x=f.x,e.velocity.y=f.y}};e.default=function(){var t=o(),e=Object(n.a)(t,2),i=e[0],s=e[1],h=s.width,y=s.height,f=Object(r.useContext)(a.b).dark,d=Object(r.useRef)(null),v=Object(r.useRef)(null),x=Object(r.useRef)(),g=[],w={sick:f?"RGBA(245, 190, 28, 1.00)":"RGBA(226, 80, 59, 1.00)",well:"gray",foreground:f?"RGBA(255, 255, 255, 1.00)":"RGBA(26, 27, 30, 1.00)",background:f?"":"RGBA(228, 230, 234, 0.7)"};function b(t,e,i,n){this.x=t,this.y=e,this.velocity={x:2*(Math.random()-.5),y:2*(Math.random()-.5)},this.radius=i,this.mass=1,this.state=n,this.color="gray",this.draw=function(t){t.beginPath(t),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=w[this.state],t.fill(),t.closePath()},this.update=function(t,e){this.draw(t);for(var n=0;n<e.length;n++)this!==e[n]&&Object(l.c)(this.x,this.y,e[n].x,e[n].y)-2*i<0&&(u(this,e[n]),"sick"!==this.state&&"sick"!==e[n].state||(this.state="sick",e[n].state="sick"));(this.x-this.radius<=0||this.x+this.radius>=h)&&(this.velocity.x=-this.velocity.x),(this.y-this.radius<=0||this.y+this.radius>=y)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y}}Object(r.useEffect)((function(){return x.current=requestAnimationFrame(k),function(){return cancelAnimationFrame(x.current)}}));for(var m=0;m<200;m++){var p=Object(l.f)(6,h-6),j=Object(l.f)(6,y-6);if(g.length>=1)for(var O=0;O<g.length;O++)Object(l.c)(p,j,g[O].x,g[O].y)-12<0&&(p=Object(l.f)(6,h-6),j=Object(l.f)(6,y-6));g.push(new b(0===m?h/2:p,0===m?y/2:j,6,0===m?"sick":"well"))}var k=function t(){var e=d.current.getContext("2d"),i=v.current.getContext("2d"),n=window.devicePixelRatio||1;d.current.width=h*n,d.current.height=y*n,d.current.style.width="".concat(h,"px"),d.current.style.height="".concat(y,"px"),e.scale(n,n),v.current.width=h*n,v.current.height=y*n,v.current.style.width="".concat(h,"px"),v.current.style.height="".concat(y,"px"),i.scale(n,n),e.clearRect(0,0,h,y),i.clearRect(0,0,h,100),g.forEach((function(t){return t.update(e,g)}));var r=g.filter((function(t){return"sick"===t.state})).length,c=200-r;i.font="20px Inter",i.fillStyle="white",i.textAlign="left",i.beginPath(e),i.arc(35,42,8,0,2*Math.PI),i.fillStyle=w.sick,i.fill(),e.restore(),i.fillStyle=w.foreground,i.beginPath(e),i.arc(35,73,8,0,2*Math.PI),i.fillStyle=w.well,i.fill(),e.restore(),i.fillStyle=w.foreground,i.fillText("Sick: ".concat(r),55,50),i.fillText("Well: ".concat(c),55,80),x.current=requestAnimationFrame(t)};return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement("div",{ref:i,style:{width:"100%",height:"60vh",borderBottom:"1px solid ".concat(w.foreground)}},c.a.createElement("canvas",{ref:d,width:h,height:y}),c.a.createElement("canvas",{ref:v,width:h,height:150})))}}}]);
//# sourceMappingURL=19.1d00b860.chunk.js.map