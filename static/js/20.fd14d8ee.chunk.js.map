{"version":3,"sources":["../node_modules/react-use-dimensions/es/index.js","utils/util-elastic-collision.js","exp/Exp7.js"],"names":["getDimensionObject","node","rect","getBoundingClientRect","width","height","top","x","left","y","right","bottom","useDimensions","_ref","arguments","length","undefined","_ref$liveMeasure","liveMeasure","_useState","useState","dimensions","setDimensions","_useState2","setNode","ref","useCallback","useLayoutEffect","measure","window","requestAnimationFrame","addEventListener","removeEventListener","rotate","velocity","angle","Math","cos","sin","resolveCollision","particle","otherParticle","xVelocityDiff","yVelocityDiff","atan2","m1","mass","m2","u1","u2","v1","v2","vFinal1","vFinal2","dark","useContext","ThemeContext","canvas","useRef","canvas2","requestRef","particles","colors","sick","well","foreground","background","Particle","radius","state","this","random","color","draw","ctx","beginPath","arc","PI","fillStyle","fill","closePath","update","i","distance","useEffect","current","animation","cancelAnimationFrame","j","push","getContext","ctx2","clearRect","forEach","filter","font","textAlign","restore","fillText","style","borderBottom"],"mappings":"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","file":"static/js/20.fd14d8ee.chunk.js","sourcesContent":["import { useState, useCallback, useLayoutEffect } from \"react\";\nfunction getDimensionObject(node) {\n    var rect = node.getBoundingClientRect();\n    return {\n        width: rect.width,\n        height: rect.height,\n        top: \"x\" in rect ? rect.x : rect.top,\n        left: \"y\" in rect ? rect.y : rect.left,\n        x: \"x\" in rect ? rect.x : rect.left,\n        y: \"y\" in rect ? rect.y : rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n    };\n}\nfunction useDimensions() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$liveMeasure = _ref.liveMeasure,\n        liveMeasure = _ref$liveMeasure === undefined ? true : _ref$liveMeasure;\n\n    var _useState = useState({}),\n        dimensions = _useState[0],\n        setDimensions = _useState[1];\n\n    var _useState2 = useState(null),\n        node = _useState2[0],\n        setNode = _useState2[1];\n\n    var ref = useCallback(function (node) {\n        setNode(node);\n    }, []);\n    useLayoutEffect(function () {\n        if (node) {\n            var measure = function measure() {\n                return window.requestAnimationFrame(function () {\n                    return setDimensions(getDimensionObject(node));\n                });\n            };\n            measure();\n            if (liveMeasure) {\n                window.addEventListener(\"resize\", measure);\n                window.addEventListener(\"scroll\", measure);\n                return function () {\n                    window.removeEventListener(\"resize\", measure);\n                    window.removeEventListener(\"scroll\", measure);\n                };\n            }\n        }\n    }, [node]);\n    return [ref, dimensions, node];\n}\nexport default useDimensions;\n//# sourceMappingURL=index.js.map","// https://gist.github.com/christopher4lis/f9ccb589ee8ecf751481f05a8e59b1dc\n\n/**\n * Rotates coordinate system for velocities\n *\n * Takes velocities and alters them as if the coordinate system they're on was rotated\n *\n * @param  Object | velocity | The velocity of an individual particle\n * @param  Float  | angle    | The angle of collision between two objects in radians\n * @return Object | The altered x and y velocities after the coordinate system has been rotated\n */\n\nexport const rotate = (velocity, angle) => {\n  const rotatedVelocities = {\n    x: velocity.x * Math.cos(angle) - velocity.y * Math.sin(angle),\n    y: velocity.x * Math.sin(angle) + velocity.y * Math.cos(angle)\n  };\n\n  return rotatedVelocities;\n}\n\n/**\n* Swaps out two colliding particles' x and y velocities after running through\n* an elastic collision reaction equation\n*\n* @param  Object | particle      | A particle object with x and y coordinates, plus velocity\n* @param  Object | otherParticle | A particle object with x and y coordinates, plus velocity\n* @return Null | Does not return a value\n*/\n\nexport const resolveCollision = (particle, otherParticle) => {\n  const xVelocityDiff = particle.velocity.x - otherParticle.velocity.x;\n  const yVelocityDiff = particle.velocity.y - otherParticle.velocity.y;\n\n  const xDist = otherParticle.x - particle.x;\n  const yDist = otherParticle.y - particle.y;\n\n  // Prevent accidental overlap of particles\n  if (xVelocityDiff * xDist + yVelocityDiff * yDist >= 0) {\n\n    // Grab angle between the two colliding particles\n    const angle = -Math.atan2(otherParticle.y - particle.y, otherParticle.x - particle.x);\n\n    // Store mass in var for better readability in collision equation\n    const m1 = particle.mass;\n    const m2 = otherParticle.mass;\n\n    // Velocity before equation\n    const u1 = rotate(particle.velocity, angle);\n    const u2 = rotate(otherParticle.velocity, angle);\n\n    // Velocity after 1d collision equation\n    const v1 = { x: u1.x * (m1 - m2) / (m1 + m2) + u2.x * 2 * m2 / (m1 + m2), y: u1.y };\n    const v2 = { x: u2.x * (m1 - m2) / (m1 + m2) + u1.x * 2 * m2 / (m1 + m2), y: u2.y };\n\n    // Final velocity after rotating axis back to original location\n    const vFinal1 = rotate(v1, -angle);\n    const vFinal2 = rotate(v2, -angle);\n\n    // Swap particle velocities for realistic bounce effect\n    particle.velocity.x = vFinal1.x;\n    particle.velocity.y = vFinal1.y;\n\n    otherParticle.velocity.x = vFinal2.x;\n    otherParticle.velocity.y = vFinal2.y;\n  }\n}","import React, { useEffect, useRef, useContext } from \"react\";\nimport ThemeContext from \"../context/ThemeContext\";\nimport useDimensions from \"react-use-dimensions\";\nimport { distance, random } from \"../utils/utils\";\nimport { resolveCollision } from \"../utils/util-elastic-collision\";\n\nexport default () => {\n  // Refs\n  const [ref, { width, height }] = useDimensions();\n  const { dark } = useContext(ThemeContext);\n\n  const canvas = useRef(null);\n  const canvas2 = useRef(null);\n  const requestRef = useRef();\n\n  // Globals\n  let particles = [];\n  let radius = 6;\n  let n = 200;\n\n  const colors = {\n    sick: dark ? \"RGBA(245, 190, 28, 1.00)\" : \"RGBA(226, 80, 59, 1.00)\",\n    well: \"gray\",\n    foreground: dark ? \"RGBA(255, 255, 255, 1.00)\" : \"RGBA(26, 27, 30, 1.00)\",\n    background: dark ? \"\" : \"RGBA(228, 230, 234, 0.7)\",\n  };\n\n  // Effect\n  useEffect(() => {\n    requestRef.current = requestAnimationFrame(animation);\n    return () => cancelAnimationFrame(requestRef.current);\n  });\n\n  // Objects\n  function Particle(x, y, radius, state) {\n    this.x = x;\n    this.y = y;\n    this.velocity = {\n      x: (Math.random() - 0.5) * 2,\n      y: (Math.random() - 0.5) * 2\n    };\n    this.radius = radius;\n    this.mass = 1;\n    this.state = state;\n    this.color = \"gray\";\n\n    this.draw = function (ctx) {\n      ctx.beginPath(ctx);\n      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n      ctx.fillStyle = colors[this.state];\n      ctx.fill();\n      ctx.closePath();\n    };\n\n    this.update = function (ctx, particles) {\n      this.draw(ctx);\n\n      // Collision\n      for (let i = 0; i < particles.length; i++) {\n        if (this === particles[i]) continue;\n\n        // Collision\n        if (\n          distance(this.x, this.y, particles[i].x, particles[i].y) -\n          radius * 2 <\n          0\n        ) {\n          resolveCollision(this, particles[i]);\n\n          // State change\n          if (this.state === \"sick\" || particles[i].state === \"sick\") {\n            this.state = \"sick\";\n            particles[i].state = \"sick\";\n          }\n        }\n      }\n\n      // Wall x\n      if (this.x - this.radius <= 0 || this.x + this.radius >= width) {\n        this.velocity.x = -this.velocity.x;\n      }\n\n      // Wall y\n      if (this.y - this.radius <= 0 || this.y + this.radius >= height) {\n        this.velocity.y = -this.velocity.y;\n      }\n\n      this.x += this.velocity.x;\n      this.y += this.velocity.y;\n    };\n  }\n\n  // Init\n  for (let i = 0; i < n; i++) {\n    let x = random(radius, width - radius);\n    let y = random(radius, height - radius);\n\n    if (particles.length >= 1) {\n      for (var j = 0; j < particles.length; j++) {\n        if (distance(x, y, particles[j].x, particles[j].y) - radius * 2 < 0) {\n          x = random(radius, width - radius);\n          y = random(radius, height - radius);\n        }\n      }\n    }\n\n    particles.push(\n      new Particle(\n        i === 0 ? width / 2 : x,\n        i === 0 ? height / 2 : y,\n        radius,\n        i === 0 ? \"sick\" : \"well\"\n      )\n    );\n  }\n\n  // Animation loop\n  const animation = () => {\n    let ctx = canvas.current.getContext(\"2d\");\n    let ctx2 = canvas2.current.getContext(\"2d\");\n\n    // SIMULATION\n    ctx.clearRect(0, 0, width, height); // clear canvas\n    ctx2.clearRect(0, 0, width, 100); // clear canvas\n\n    particles.forEach(particle => particle.update(ctx, particles));\n\n    // TEXT\n    const sick = particles.filter(particle => particle.state === \"sick\").length;\n    const well = n - sick;\n\n    ctx2.font = \"20px Inter\";\n    ctx2.fillStyle = \"white\";\n    ctx2.textAlign = \"left\";\n\n    // CLAVE\n    ctx2.beginPath(ctx);\n    ctx2.arc(35, 42, 8, 0, Math.PI * 2);\n    ctx2.fillStyle = colors.sick;\n    ctx2.fill();\n\n    ctx.restore();\n\n    ctx2.fillStyle = colors.foreground;\n\n    ctx2.beginPath(ctx);\n    ctx2.arc(35, 73, 8, 0, Math.PI * 2);\n    ctx2.fillStyle = colors.well;\n    ctx2.fill();\n\n    ctx.restore();\n\n    ctx2.fillStyle = colors.foreground;\n\n    ctx2.fillText(`Sick: ${sick}`, 55, 50);\n    ctx2.fillText(`Well: ${well}`, 55, 80);\n\n    // End text\n    requestRef.current = requestAnimationFrame(animation);\n  };\n\n  return (\n    <div style={{\n      width: \"100%\",\n    }}>\n      <div\n        ref={ref}\n        style={{\n          width: \"100%\",\n          height: \"60vh\",\n          borderBottom: `1px solid ${colors.foreground}`,\n        }}\n      >\n        <canvas ref={canvas} width={width} height={height} />\n\n        <canvas ref={canvas2} width={width} height={\"150px\"} />\n      </div>\n    </div>\n  );\n};\n"],"sourceRoot":""}